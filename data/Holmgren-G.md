# EllipticCurve converts coordinates projective->affine->projective->affine

In https://github.com/code-423n4/2023-04-ens/blob/45ea10bacb2a398e14d711fe28d1738271cd7640/contracts/dnssec-oracle/algorithms/EllipticCurve.sol#L408 `addAndReturnProjectivePoint(...)` calculates the result in projective coordinates (https://github.com/code-423n4/2023-04-ens/blob/45ea10bacb2a398e14d711fe28d1738271cd7640/contracts/dnssec-oracle/algorithms/EllipticCurve.sol#L294), converts them to affine (https://github.com/code-423n4/2023-04-ens/blob/45ea10bacb2a398e14d711fe28d1738271cd7640/contracts/dnssec-oracle/algorithms/EllipticCurve.sol#L296), converts them back to projective (https://github.com/code-423n4/2023-04-ens/blob/main/contracts/dnssec-oracle/algorithms/EllipticCurve.sol#L86) and immediately after that the coordinates are converted once again to affine in https://github.com/code-423n4/2023-04-ens/blob/45ea10bacb2a398e14d711fe28d1738271cd7640/contracts/dnssec-oracle/algorithms/EllipticCurve.sol#L415.

This conversion back-and-forth chain can be shortened by using `addProj(...)` function in line 408. Note that a separate bug (interpreting coordinates as Jacobian instead of projective) in `validateSignature(...)` has to be fixed so that the function works for `Z != 1`.